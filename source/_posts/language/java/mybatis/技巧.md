---
    title: mybatis技巧
    categories: java-mybatis
    tags:
    creator: cjq
    create_time: 2021/01/06

---



##### Mybatis中判断集合的 size 不为空

```xml
<if test="null != staffCodeList and staffCodeList.size > 0">
and gui.USER_CODE not in
    <foreach collection="staffCodeList" item="staffCode" open="(" separator=","  close=")">
    #{staffCode}
    </foreach>
</if>
```

##### 判断参数为空

1.判断Double类型：<if test="probability != null">probability = #{probability},</if>，在实体类中probability字段是Double类型；

2.判断Integer类型：<if test="faceValue != null">face_value = #{faceValue}, </if>，在实体类中faceValue字段是Integer类型；

3.判断String类型：<if test="couponName != null and couponName != ''">coupon_name = #{couponName}, </if>，在实体类中couponName是String类型；

4.判断Date类型：<if test="beginTime != null">begin_time = #{beginTime}, </if>，在实体类中beginTime字段是Date类型；

因为String类型是符合的，但是如果是Integer类型的话，如果变量的值是0,即 faceValue = 0, mybatis在进行 faceValue != '' 的时候会认为 faceValue 的值是空字符串, 即 faceValue == '' 为true；

同理，Double，Date也是如此。所以如果是Integer类型，Double类型，Date类型只需要判断 != null 即可。如果String类型需要判断不等于0，则需要写name != '0'.toString()，否则会报错。

##### mybatis 中 foreach collection的三种用法

[mybatis 中 foreach collection的三种用法](https://blog.csdn.net/weixin_30684743/article/details/96912611?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromBaidu-1.control&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromBaidu-1.control)

##### Mybatis使用IN语句查询

[Mybatis使用IN语句查询](https://blog.csdn.net/u011781521/article/details/79669180)



### 返回数据

[mybatis插入数据后返回对象id](https://www.cnblogs.com/tygtyg/p/10448515.html)

[mybatis插入返回id或对象](https://www.cnblogs.com/ws563573095/p/10301809.html)



